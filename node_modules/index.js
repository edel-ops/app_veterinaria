const http = require('http');
const url = require('url');

const callbackDelServidor = (req, res) => {

  // obtener la url desde el objeto request (req)
  const urlActual = req.url;
  const urlParseada = url.parse(urlActual, true);
  console.log({ urlActual, urlParseada });

  // obtener la ruta
  const ruta = urlParseada.pathname;

  // quitar slash / a las rutas
  const rutaLimpia = ruta.replace(/^\/+|\/+$/g, '');

  // enviar la respuesta dependiendo de la ruta
  switch (rutaLimpia) {
    case 'ruta':
      res.end('Estas en una ruta conocida');
      break;
      
    default:
      res.end('Estas en una ruta desconocida');
  }
};

const server = http.createServer(callbackDelServidor);

server.listen(5000, () => {
  console.log('el servidor esta escuchando peticiones en http://localhost:5000/');
});